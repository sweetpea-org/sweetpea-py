<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using SweetPea &mdash; SweetPea  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing to SweetPea" href="contributing.html" />
    <link rel="prev" title="Factorial Experiment Design" href="factorial_design.html" />
<link rel="stylesheet" type="text/css"
      href="../_static/css/custom.css" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> SweetPea
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../guide.html">SweetPea Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation and Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#automated-installation-from-the-python-package-index">Automated Installation from the Python Package Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#manual-installation-from-source">Manual Installation from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#contributing-to-sweetpea-development">Contributing to SweetPea Development</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="factorial_design.html">Factorial Experiment Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="factorial_design.html#factors">Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="factorial_design.html#levels">Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="factorial_design.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="factorial_design.html#derivations">Derivations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="factorial_design.html#basic-windows">Basic Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="factorial_design.html#transition-windows">Transition Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="factorial_design.html#within-trial-windows">Within-Trial Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="factorial_design.html#glossary">Glossary</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using SweetPea</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-simple-stroop-experiment">A Simple Stroop Experiment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#building-the-simple-stroop-experiment">Building the Simple Stroop Experiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sweetpea-feature-recap">SweetPea Feature Recap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-derived-levels">Working With Derived Levels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#derivation">Derivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constraints">Constraints</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing to SweetPea</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing/issues.html">Using the GitHub Issue Tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing/development.html">Developing SweetPea</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing/development.html#configuring-your-development-environment">Configuring Your Development Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/development.html#repository-organization">Repository Organization</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/development.html#workflows">Workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/development.html#pull-requests">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contributing/documentation.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing/documentation.html#installing-dependencies">Installing Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/documentation.html#building-the-documentation">Building the Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/documentation.html#automatic-vs-manual-documentation">Automatic vs Manual Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/documentation.html#contributing-to-the-automatic-documentation">Contributing to the Automatic Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/documentation.html#style-guides">Style Guides</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contributing/rest_style_guide.html">reStructuredText Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing/rest_style_guide.html#general">General</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/rest_style_guide.html#docstrings">Docstrings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contributing/py_style_guide.html">Python Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#note-on-pep-8">Note on PEP 8</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#maximum-line-length">Maximum Line Length</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#blank-lines">Blank Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#imports">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#string-quotes">String Quotes</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#trailing-commas">Trailing Commas</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing/py_style_guide.html#type-checking-or-linting-overrides">Type-Checking or Linting Overrides</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">SweetPea API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/sweetpea.html">sweetpea package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/sweetpea.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.core.html">sweetpea.core package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.sampling_strategies.html">sweetpea.sampling_strategies package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.tests.html">sweetpea.tests package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/sweetpea.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.backend.html">sweetpea.backend module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.base_constraint.html">sweetpea.base_constraint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.blocks.html">sweetpea.blocks module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.combinatorics.html">sweetpea.combinatorics module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.constraints.html">sweetpea.constraints module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.derivation_processor.html">sweetpea.derivation_processor module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.design_graph.html">sweetpea.design_graph module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.design_partitions.html">sweetpea.design_partitions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.encoding_diagram.html">sweetpea.encoding_diagram module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.internal.html">sweetpea.internal module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.logic.html">sweetpea.logic module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.metrics.html">sweetpea.metrics module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.primitives.html">sweetpea.primitives module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/sweetpea.server.html">sweetpea.server module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SweetPea</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../guide.html">SweetPea Guide</a> &raquo;</li>
      <li>Using SweetPea</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guide/usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-sweetpea">
<span id="guide-usage"></span><h1>Using SweetPea<a class="headerlink" href="#using-sweetpea" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We are constantly seeking to improve the user interface of the SweetPea
language. If something seems difficult or unintuitive to you, please let us
know by <a class="reference internal" href="contributing/issues.html#issues"><span class="std std-ref">filing an issue</span></a>!</p>
</div>
<p>So you’ve decided to design a factorial experiment. That’s excellent! Factorial
experimental designs are a great way to build repeatable experiments with
multiple independent variables. Let’s design our experiment in words first, and
then build it in SweetPea.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you aren’t familiar with factorial experimental design, that’s okay! Just
check out <a class="reference internal" href="factorial_design.html#guide-factorial-design"><span class="std std-ref">our short primer</span></a> first.</p>
</div>
<section id="a-simple-stroop-experiment">
<h2>A Simple Stroop Experiment<a class="headerlink" href="#a-simple-stroop-experiment" title="Permalink to this heading"></a></h2>
<p>For our example, we’ll be testing the <a class="reference external" href="https://en.wikipedia.org/wiki/Stroop_effect">Stroop effect</a>. From the Wikipedia article:</p>
<blockquote>
<div><p>In psychology, the <strong>Stroop effect</strong> is the delay in reaction time between
congruent and incongruent stimuli.</p>
</div></blockquote>
<p>One of the most well-known experiments to test the Stroop effect is to show a
participant a series of words for colors that are also displayed in color.
Sometimes, the color of the word is the same as the color in which the word is
written — this is called <em>congruence</em>. Other times, the word and color are
different, which is <em>incongruence</em>.</p>
<p>We have two apparent independent variables: the color and the text. We call
independent variables <em>factors</em> in the realm of factorial design.</p>
<div class="admonition note" id="guide-usage-congruency">
<p class="admonition-title">Note</p>
<p>There is also a third factor: whether the pairing of the color and text is
congruent or incongruent. This is a form of <em>derived factor</em>, and we’ll come
back to it later.</p>
</div>
<p>To test this effect, we will construct a series of <em>trials</em> to administer to a
participant, where each trial is a single color+text pairing. For this
experiment, we will use the three colors red, green, and blue, and we will also
use the names of those colors as the text. All together, this gives us 9
possible values for each trial:</p>
<table class="colwidths-auto docutils align-center" id="id1">
<caption><span class="caption-text">Stroop Effect Trials</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head stub"></th>
<th class="head"><p>Red (Text)</p></th>
<th class="head"><p>Green (Text)</p></th>
<th class="head"><p>Blue (Text)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><th class="stub"><p>Red (Color)</p></th>
<td><p><span class="red">red</span></p></td>
<td><p><span class="red">green</span></p></td>
<td><p><span class="red">blue</span></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>Green (Color)</p></th>
<td><p><span class="green">red</span></p></td>
<td><p><span class="green">green</span></p></td>
<td><p><span class="green">blue</span></p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Blue (Color)</p></th>
<td><p><span class="blue">red</span></p></td>
<td><p><span class="blue">green</span></p></td>
<td><p><span class="blue">blue</span></p></td>
</tr>
</tbody>
</table>
<p>In the parlance of factorial design, these three colors constitute <em>levels</em> in
each of the factors. That is to say that the <code class="docutils literal notranslate"><span class="pre">color</span></code> factor has three levels,
and the <code class="docutils literal notranslate"><span class="pre">text</span></code> factor has three levels.</p>
<p>A trial will consist of showing one of the <code class="docutils literal notranslate"><span class="pre">color</span></code> and <code class="docutils literal notranslate"><span class="pre">text</span></code> pairs to a
participant and asking them to identify the color in which the text is written.
We will synthesize some <em>trial sequences</em> for our experiment now.</p>
<section id="building-the-simple-stroop-experiment">
<h3>Building the Simple Stroop Experiment<a class="headerlink" href="#building-the-simple-stroop-experiment" title="Permalink to this heading"></a></h3>
<p>To build this simple Stroop experiment, we import and use the following SweetPea
language forms:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> — constructs factors and their levels</p></li>
<li><p><a class="reference internal" href="../api/sweetpea.html#sweetpea.fully_cross_block" title="sweetpea.fully_cross_block"><code class="xref py py-func docutils literal notranslate"><span class="pre">fully_cross_block()</span></code></a> — combines the factors to produce trials</p></li>
<li><p><a class="reference internal" href="../api/sweetpea.html#sweetpea.synthesize_trials_non_uniform" title="sweetpea.synthesize_trials_non_uniform"><code class="xref py py-func docutils literal notranslate"><span class="pre">synthesize_trials_non_uniform()</span></code></a> — uses non-uniform sampling to
synthesize trial sequences</p></li>
</ul>
<p>To put it together, we do:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">Factor</span><span class="p">,</span> <span class="n">fully_cross_block</span><span class="p">,</span> <span class="n">synthesize_trials_non_uniform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">fully_cross_block</span><span class="p">([</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">],</span> <span class="p">[</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">],</span> <span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">experiments</span> <span class="o">=</span> <span class="n">synthesize_trials_non_uniform</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">Sampling 1 trial sequences using the class &lt;class &#39;sweetpea.sampling_strategies.uniform_combinatoric.UniformCombinatoricSamplingStrategy&#39;&gt;</span>
</pre></div>
</div>
<p>The result of this synthesis is based on pseudo-random number generation, and so
the output will not be the same every time. However, when we ran the code to
write this tutorial, we saw the following output (your output should look
similar, though probably not identical):</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">print_experiments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_experiments</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">experiments</span><span class="p">)</span>
<span class="go">1 trial sequences found.</span>
<span class="go">Experiment 0:</span>
<span class="go">color green | text blue</span>
<span class="go">color blue  | text green</span>
<span class="go">color green | text red</span>
<span class="go">color green | text green</span>
<span class="go">color red   | text green</span>
<span class="go">color red   | text blue</span>
<span class="go">color blue  | text blue</span>
<span class="go">color red   | text red</span>
<span class="go">color blue  | text red</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <a class="reference internal" href="../api/sweetpea.html#sweetpea.print_experiments" title="sweetpea.print_experiments"><code class="xref py py-func docutils literal notranslate"><span class="pre">print_experiments()</span></code></a> function is useful for printing the results
of synthesis.</p>
</div>
<p>We generated a <em>fully-crossed experiment</em>: all possible color-text pairs were
generated, though their order was randomized. We can see this by sorting a
simplified representation of the experiment:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">simplify_experiments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># We immediately access the first element of the returned list.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># This is because we only generated one trial run.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simple</span> <span class="o">=</span> <span class="n">simplify_experiments</span><span class="p">(</span><span class="n">experiments</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">simple</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">...</span>
<span class="go">(&#39;blue&#39;, &#39;blue&#39;)</span>
<span class="go">(&#39;blue&#39;, &#39;green&#39;)</span>
<span class="go">(&#39;blue&#39;, &#39;red&#39;)</span>
<span class="go">(&#39;green&#39;, &#39;blue&#39;)</span>
<span class="go">(&#39;green&#39;, &#39;green&#39;)</span>
<span class="go">(&#39;green&#39;, &#39;red&#39;)</span>
<span class="go">(&#39;red&#39;, &#39;blue&#39;)</span>
<span class="go">(&#39;red&#39;, &#39;green&#39;)</span>
<span class="go">(&#39;red&#39;, &#39;red&#39;)</span>
</pre></div>
</div>
<p>Because the <code class="docutils literal notranslate"><span class="pre">color</span></code> factor has <span class="math notranslate nohighlight">\(3\)</span> levels and the <code class="docutils literal notranslate"><span class="pre">text</span></code> factor has
<span class="math notranslate nohighlight">\(3\)</span> levels, when we fully cross the factors we get <span class="math notranslate nohighlight">\(3 \times 3 = 9\)</span>
resulting trials.</p>
</section>
<section id="sweetpea-feature-recap">
<h3>SweetPea Feature Recap<a class="headerlink" href="#sweetpea-feature-recap" title="Permalink to this heading"></a></h3>
<p>In building our simple Stroop experiment, we used a few of the most important
SweetPea forms. Let’s review them now.</p>
<section id="simple-factors-and-levels">
<h4>Simple Factors and Levels<a class="headerlink" href="#simple-factors-and-levels" title="Permalink to this heading"></a></h4>
<p><em>Simple factors</em> are factors that are composed only of simple levels. <em>Simple
levels</em> are levels that are essentially just names and nothing more; they are
not dependent on any other factors or levels.</p>
<p>While it is possible to import the <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleLevel</span></code></a> class, it is usually
not necessary. This is because simple levels can only be put into simple
factors, which in turn can only consist of simple levels, and we can create
simple levels implicitly during <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> initialization.</p>
<p>When you construct a <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a>, you also pass a list of levels to it. If
those levels are not instances of the <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.Level" title="sweetpea.primitives.Level"><code class="xref py py-class docutils literal notranslate"><span class="pre">Level</span></code></a> class, SweetPea will
automatically convert them into instances of <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleLevel</span></code></a>. (Usually,
this is done by simply converting the value into a string, but see the
documentation for all the details.)</p>
<p>To put all this information together: you can create a simple factor composed of
simple levels by just using the <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> initializer:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">Factor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">factor</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;factor_name&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">factor</span><span class="o">.</span><span class="n">levels</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">factor</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;one&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">factor</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">factor</span> <span class="ow">is</span> <span class="n">factor</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Although you can index into a factor by a level’s name to access the level,
the indexing function expects its argument to be a string! This means that
you cannot retrieve the second level of the above factor by the value we
used to create it:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">factor</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;Factor factor_name has no level named 2.&#39;</span>
</pre></div>
</div>
<p>Instead, you must use the string representation generated by the value’s
<code class="docutils literal notranslate"><span class="pre">__str__</span></code> method, which can be called using the <code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code> function:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">factor</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;2&#39;</span>
</pre></div>
</div>
</div>
<p>We will discuss complex factors (also known as <em>derived factors</em>) a bit later.</p>
</section>
<section id="block-creation">
<h4>Block Creation<a class="headerlink" href="#block-creation" title="Permalink to this heading"></a></h4>
<p>After you get your factors and levels together, you can create an experimental
design <a class="reference internal" href="../api/sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">Block</span></code></a> using one of the appropriate functions. We showed how it
looks to use <a class="reference internal" href="../api/sweetpea.html#sweetpea.fully_cross_block" title="sweetpea.fully_cross_block"><code class="xref py py-func docutils literal notranslate"><span class="pre">fully_cross_block()</span></code></a> in our simple example above. The
function takes a number of arguments, but in the simplest case you need only do:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">Factor</span><span class="p">,</span> <span class="n">fully_cross_block</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;f1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;f2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">fully_cross_block</span><span class="p">([</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">],</span> <span class="p">[</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">],</span> <span class="p">[])</span>
</pre></div>
</div>
<p>That is to say that when you’re only dealing with a simple experiment (an
experiment comprised only of simple factors), you can probably just use a list
of your factors as both the <code class="docutils literal notranslate"><span class="pre">design</span></code> and your <code class="docutils literal notranslate"><span class="pre">crossing</span></code>, and then hold the
<code class="docutils literal notranslate"><span class="pre">constraints</span></code> empty with an empty list.</p>
</section>
<section id="trial-synthesis">
<h4>Trial Synthesis<a class="headerlink" href="#trial-synthesis" title="Permalink to this heading"></a></h4>
<p>Once you have a complete experimental design in the form of a <a class="reference internal" href="../api/sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">Block</span></code></a>,
you’re ready to use it to synthesize trials. In the above example, we used the
<a class="reference internal" href="../api/sweetpea.html#sweetpea.synthesize_trials_non_uniform" title="sweetpea.synthesize_trials_non_uniform"><code class="xref py py-func docutils literal notranslate"><span class="pre">synthesize_trials_non_uniform()</span></code></a>, which conducts non-uniform SAT-sampling
to synthesize the trials. Uniform sampling is tricky and still a work in
progress, but there does exist a function that tries to accomplish it:
<a class="reference internal" href="../api/sweetpea.html#sweetpea.synthesize_trials_uniform" title="sweetpea.synthesize_trials_uniform"><code class="xref py py-func docutils literal notranslate"><span class="pre">synthesize_trials_uniform()</span></code></a>.</p>
</section>
</section>
</section>
<section id="working-with-derived-levels">
<h2>Working With Derived Levels<a class="headerlink" href="#working-with-derived-levels" title="Permalink to this heading"></a></h2>
<p>We’ve covered simple factors and levels, so now we move on to the more complex
capabilities of SweetPea: derivations and constraints.</p>
<section id="derivation">
<h3>Derivation<a class="headerlink" href="#derivation" title="Permalink to this heading"></a></h3>
<p><em>Derivation</em> is the process of creating new levels that depend in some way upon
information contained in other levels from other factors — and sometimes other
trials. In other words, <em>derivation</em> is what produces <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DerivedLevels</span></code></a>.</p>
<p>Derivation is perhaps best explained through example. We resume the Stroop
example from above, and return to the issue of <a class="reference internal" href="#guide-usage-congruency"><span class="std std-ref">congruency</span></a>. Recall that we had produced two simple factors of
three levels each. Now we would like to create a factor for <code class="docutils literal notranslate"><span class="pre">congruency</span></code> that
has two levels: <code class="docutils literal notranslate"><span class="pre">congruent</span></code> and <code class="docutils literal notranslate"><span class="pre">incongruent</span></code>. A trial’s <code class="docutils literal notranslate"><span class="pre">congruency</span></code> is
determined by the same trial’s <code class="docutils literal notranslate"><span class="pre">color</span></code> and <code class="docutils literal notranslate"><span class="pre">text</span></code>: if they align, then the
<code class="docutils literal notranslate"><span class="pre">congruency</span></code> is <code class="docutils literal notranslate"><span class="pre">congruent</span></code>. Otherwise, the trial is <code class="docutils literal notranslate"><span class="pre">incongruent</span></code>.</p>
<p>Let’s create the <code class="docutils literal notranslate"><span class="pre">congruency</span></code> factor now. We start by recreating the <code class="docutils literal notranslate"><span class="pre">color</span></code>
and <code class="docutils literal notranslate"><span class="pre">text</span></code> simple factors from before:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">Factor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Next, we need to define the predicate functions that will be used to determine
whether a color-text pair is congruent.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">congruent</span><span class="p">(</span><span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">color</span> <span class="o">==</span> <span class="n">word</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">incongruent</span><span class="p">(</span><span class="n">color</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="ow">not</span> <span class="n">congruent</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Now, we can construct the derived levels. While simple levels can be constructed
directly by the <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Factor</span></code></a> during initialization, <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DerivedLevel</span></code></a>
instances must be manually instantiated. <a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DerivedLevels</span></code></a>
also require a <em>derivation window</em> as an argument. We will discuss this more
in-depth in a little bit, so for now just trust us that we want to use the
<a class="reference internal" href="../api/sweetpea.primitives.html#sweetpea.primitives.WithinTrialDerivationWindow" title="sweetpea.primitives.WithinTrialDerivationWindow"><code class="xref py py-class docutils literal notranslate"><span class="pre">WithinTrialDerivationWindow</span></code></a> for this particular job:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">DerivedLevel</span><span class="p">,</span> <span class="n">WithinTrialDerivationWindow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">con_level</span> <span class="o">=</span> <span class="n">DerivedLevel</span><span class="p">(</span><span class="s2">&quot;congruent&quot;</span><span class="p">,</span> <span class="n">WithinTrialDerivationWindow</span><span class="p">(</span><span class="n">congruent</span><span class="p">,</span> <span class="p">[</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inc_level</span> <span class="o">=</span> <span class="n">DerivedLevel</span><span class="p">(</span><span class="s2">&quot;incongruent&quot;</span><span class="p">,</span> <span class="n">WithinTrialDerivationWindow</span><span class="p">(</span><span class="n">incongruent</span><span class="p">,</span> <span class="p">[</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">]))</span>
</pre></div>
</div>
<p>Finally, we can construct the <code class="docutils literal notranslate"><span class="pre">congruency</span></code> factor:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">congruency</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;congruency&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">con_level</span><span class="p">,</span> <span class="n">inc_level</span><span class="p">])</span>
</pre></div>
</div>
<p>Now when we create a full crossing using <a class="reference internal" href="../api/sweetpea.html#sweetpea.fully_cross_block" title="sweetpea.fully_cross_block"><code class="xref py py-func docutils literal notranslate"><span class="pre">fully_cross_block()</span></code></a>, we will
include the <code class="docutils literal notranslate"><span class="pre">congruency</span></code> factor with the rest of the design. However, it is
<em>not</em> part of the crossing itself. The result of synthesizing trials from such a
crossing will be a random arrangement of the following trials:</p>
<table class="colwidths-auto docutils align-center" id="id2">
<caption><span class="caption-text">Stroop Effect Trials With Congruency</span><a class="headerlink" href="#id2" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>Text</p></th>
<th class="head"><p>Congruency</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>red</p></td>
<td><p>red</p></td>
<td><p>congruent</p></td>
</tr>
<tr class="row-odd"><td><p>red</p></td>
<td><p>green</p></td>
<td><p>incongruent</p></td>
</tr>
<tr class="row-even"><td><p>red</p></td>
<td><p>blue</p></td>
<td><p>incongruent</p></td>
</tr>
<tr class="row-odd"><td><p>green</p></td>
<td><p>red</p></td>
<td><p>incongruent</p></td>
</tr>
<tr class="row-even"><td><p>green</p></td>
<td><p>green</p></td>
<td><p>congruent</p></td>
</tr>
<tr class="row-odd"><td><p>green</p></td>
<td><p>blue</p></td>
<td><p>incongruent</p></td>
</tr>
<tr class="row-even"><td><p>blue</p></td>
<td><p>red</p></td>
<td><p>incongruent</p></td>
</tr>
<tr class="row-odd"><td><p>blue</p></td>
<td><p>green</p></td>
<td><p>incongruent</p></td>
</tr>
<tr class="row-even"><td><p>blue</p></td>
<td><p>blue</p></td>
<td><p>congruent</p></td>
</tr>
</tbody>
</table>
<p>We can verify this by using the <a class="reference internal" href="../api/sweetpea.html#sweetpea.simplify_experiments" title="sweetpea.simplify_experiments"><code class="xref py py-func docutils literal notranslate"><span class="pre">simplify_experiments()</span></code></a> function on the
result of synthesizing one trial run from this design:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea</span> <span class="kn">import</span> <span class="n">fully_cross_block</span><span class="p">,</span> <span class="n">synthesize_trials_non_uniform</span><span class="p">,</span> <span class="n">simplify_experiments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">design</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">congruency</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crossing</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">fully_cross_block</span><span class="p">(</span><span class="n">design</span><span class="p">,</span> <span class="n">crossing</span><span class="p">,</span> <span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">experiments</span> <span class="o">=</span> <span class="n">synthesize_trials_non_uniform</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">simplify_experiments</span><span class="p">(</span><span class="n">experiments</span><span class="p">)[</span><span class="mi">0</span><span class="p">]):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">...</span>
<span class="go">(&#39;blue&#39;, &#39;blue&#39;, &#39;congruent&#39;)</span>
<span class="go">(&#39;blue&#39;, &#39;green&#39;, &#39;incongruent&#39;)</span>
<span class="go">(&#39;blue&#39;, &#39;red&#39;, &#39;incongruent&#39;)</span>
<span class="go">(&#39;green&#39;, &#39;blue&#39;, &#39;incongruent&#39;)</span>
<span class="go">(&#39;green&#39;, &#39;green&#39;, &#39;congruent&#39;)</span>
<span class="go">(&#39;green&#39;, &#39;red&#39;, &#39;incongruent&#39;)</span>
<span class="go">(&#39;red&#39;, &#39;blue&#39;, &#39;incongruent&#39;)</span>
<span class="go">(&#39;red&#39;, &#39;green&#39;, &#39;incongruent&#39;)</span>
<span class="go">(&#39;red&#39;, &#39;red&#39;, &#39;congruent&#39;)</span>
</pre></div>
</div>
</section>
<section id="constraints">
<h3>Constraints<a class="headerlink" href="#constraints" title="Permalink to this heading"></a></h3>
<p>Sometimes when designing an experiment, you’d like to impose some constraints on
the mechanisms that generate trial sequences. SweetPea has you covered.</p>
<p>Let’s say we look at the above list of trials and decide “Hmm, maybe we should
ensure we don’t get too many <code class="docutils literal notranslate"><span class="pre">incongruent</span></code> trials in a row.” After all, there
are six <code class="docutils literal notranslate"><span class="pre">incongruent</span></code> trials to just three <code class="docutils literal notranslate"><span class="pre">congruent</span></code> ones!</p>
<p>Arbitrarily, we will choose to limit trial sequences such that only two
<code class="docutils literal notranslate"><span class="pre">incongruent</span></code> trials may appear in a row. This will be accomplished using the
<a class="reference internal" href="../api/sweetpea.constraints.html#sweetpea.constraints.at_most_k_in_a_row" title="sweetpea.constraints.at_most_k_in_a_row"><code class="xref py py-func docutils literal notranslate"><span class="pre">at_most_k_in_a_row()</span></code></a> function.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># We resume from the previous session.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sweetpea.constraints</span> <span class="kn">import</span> <span class="n">at_most_k_in_a_row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">congruency_constraint</span> <span class="o">=</span> <span class="n">at_most_k_in_a_row</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">congruency</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">fully_cross_block</span><span class="p">(</span><span class="n">design</span><span class="p">,</span> <span class="n">crossing</span><span class="p">,</span> <span class="p">[</span><span class="n">congruency_constraint</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">experiments</span> <span class="o">=</span> <span class="n">synthesize_trials_non_uniform</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">Sampling 3 trial sequences using the &lt;class &#39;sweetpea.sampling_strategies.non_uniform.NonUniformSamplingStrategy&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_experiments</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">experiments</span><span class="p">)</span>  
<span class="go">3 trial sequences found.</span>
<span class="go">Experiment 0:</span>
<span class="go">color red   | text green | congruency incongruent</span>
<span class="go">color green | text blue  | congruency incongruent</span>
<span class="go">color red   | text red   | congruency congruent</span>
<span class="go">color blue  | text green | congruency incongruent</span>
<span class="go">color red   | text blue  | congruency incongruent</span>
<span class="go">color green | text green | congruency congruent</span>
<span class="go">color green | text red   | congruency incongruent</span>
<span class="go">color blue  | text red   | congruency incongruent</span>
<span class="go">color blue  | text blue  | congruency congruent</span>

<span class="go">Experiment 1:</span>
<span class="go">color red   | text green | congruency incongruent</span>
<span class="go">color blue  | text red   | congruency incongruent</span>
<span class="go">color red   | text red   | congruency congruent</span>
<span class="go">color blue  | text green | congruency incongruent</span>
<span class="go">color red   | text blue  | congruency incongruent</span>
<span class="go">color green | text green | congruency congruent</span>
<span class="go">color green | text red   | congruency incongruent</span>
<span class="go">color blue  | text blue  | congruency congruent</span>
<span class="go">color green | text blue  | congruency incongruent</span>

<span class="go">Experiment 2:</span>
<span class="go">color red   | text green | congruency incongruent</span>
<span class="go">color blue  | text red   | congruency incongruent</span>
<span class="go">color red   | text red   | congruency congruent</span>
<span class="go">color blue  | text green | congruency incongruent</span>
<span class="go">color red   | text blue  | congruency incongruent</span>
<span class="go">color blue  | text blue  | congruency congruent</span>
<span class="go">color green | text red   | congruency incongruent</span>
<span class="go">color green | text blue  | congruency incongruent</span>
<span class="go">color green | text green | congruency congruent</span>
</pre></div>
</div>
<p>We can see from these outputs that we never get more than two trials in a row
with the same <code class="docutils literal notranslate"><span class="pre">congruency</span></code> level selected. However, note that the constraint
is <em>not</em> imposed across experiment boundaries: the final trial of the second
experiment is <code class="docutils literal notranslate"><span class="pre">incongruent</span></code>, and the first two trials of the third experiment
are also <code class="docutils literal notranslate"><span class="pre">incongruent</span></code>. This adds up to three consecutive trials! But this
behavior is expected. The <a class="reference internal" href="../api/sweetpea.constraints.html#sweetpea.constraints.at_most_k_in_a_row" title="sweetpea.constraints.at_most_k_in_a_row"><code class="xref py py-func docutils literal notranslate"><span class="pre">at_most_k_in_a_row()</span></code></a>
constraint only looks <em>within</em> a given experiment, not across experiments.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="factorial_design.html" class="btn btn-neutral float-left" title="Factorial Experiment Design" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="contributing.html" class="btn btn-neutral float-right" title="Contributing to SweetPea" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, SweetPea Research Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>