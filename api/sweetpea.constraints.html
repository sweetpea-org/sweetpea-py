<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>sweetpea.constraints module &mdash; SweetPea  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="sweetpea.derivation_processor module" href="sweetpea.derivation_processor.html" />
    <link rel="prev" title="sweetpea.combinatorics module" href="sweetpea.combinatorics.html" />
<link rel="stylesheet" type="text/css"
      href="../_static/css/custom.css" />


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> SweetPea
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guide.html">SweetPea Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/installation.html">Installation and Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/installation.html#automated-installation-from-the-python-package-index">Automated Installation from the Python Package Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/installation.html#manual-installation-from-source">Manual Installation from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/installation.html#contributing-to-sweetpea-development">Contributing to SweetPea Development</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/factorial_design.html">Factorial Experiment Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/factorial_design.html#factors">Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/factorial_design.html#levels">Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/factorial_design.html#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/factorial_design.html#derivations">Derivations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/factorial_design.html#basic-windows">Basic Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/factorial_design.html#transition-windows">Transition Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/factorial_design.html#within-trial-windows">Within-Trial Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/factorial_design.html#glossary">Glossary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/usage.html">Using SweetPea</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/usage.html#a-simple-stroop-experiment">A Simple Stroop Experiment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/usage.html#building-the-simple-stroop-experiment">Building the Simple Stroop Experiment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/usage.html#sweetpea-feature-recap">SweetPea Feature Recap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/usage.html#working-with-derived-levels">Working With Derived Levels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/usage.html#derivation">Derivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/usage.html#constraints">Constraints</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/contributing.html">Contributing to SweetPea</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/contributing/issues.html">Using the GitHub Issue Tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/contributing/development.html">Developing SweetPea</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/development.html#configuring-your-development-environment">Configuring Your Development Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/development.html#repository-organization">Repository Organization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/development.html#workflows">Workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/development.html#pull-requests">Pull Requests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/contributing/documentation.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/documentation.html#installing-dependencies">Installing Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/documentation.html#building-the-documentation">Building the Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/documentation.html#automatic-vs-manual-documentation">Automatic vs Manual Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/documentation.html#contributing-to-the-automatic-documentation">Contributing to the Automatic Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/documentation.html#style-guides">Style Guides</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/contributing/rest_style_guide.html">reStructuredText Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/rest_style_guide.html#general">General</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/rest_style_guide.html#docstrings">Docstrings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/contributing/py_style_guide.html">Python Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#note-on-pep-8">Note on PEP 8</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#maximum-line-length">Maximum Line Length</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#blank-lines">Blank Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#imports">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#string-quotes">String Quotes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#trailing-commas">Trailing Commas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#comments">Comments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/contributing/py_style_guide.html#type-checking-or-linting-overrides">Type-Checking or Linting Overrides</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">SweetPea API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="sweetpea.html">sweetpea package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sweetpea.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.core.html">sweetpea.core package</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.sampling_strategies.html">sweetpea.sampling_strategies package</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.tests.html">sweetpea.tests package</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="sweetpea.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="sweetpea.backend.html">sweetpea.backend module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.base_constraint.html">sweetpea.base_constraint module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.blocks.html">sweetpea.blocks module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.combinatorics.html">sweetpea.combinatorics module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">sweetpea.constraints module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.derivation_processor.html">sweetpea.derivation_processor module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.design_graph.html">sweetpea.design_graph module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.design_partitions.html">sweetpea.design_partitions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.encoding_diagram.html">sweetpea.encoding_diagram module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.internal.html">sweetpea.internal module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.logic.html">sweetpea.logic module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.metrics.html">sweetpea.metrics module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.primitives.html">sweetpea.primitives module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sweetpea.server.html">sweetpea.server module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SweetPea</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../api.html">SweetPea API Documentation</a> &raquo;</li>
          <li><a href="sweetpea.html">sweetpea package</a> &raquo;</li>
      <li>sweetpea.constraints module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/sweetpea.constraints.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-sweetpea.constraints">
<span id="sweetpea-constraints-module"></span><h1>sweetpea.constraints module<a class="headerlink" href="#module-sweetpea.constraints" title="Permalink to this heading"></a></h1>
<p>This module provides constraints for CNF generation.</p>
<dl class="py function">
<dt class="sig sig-object py" id="sweetpea.constraints.validate_factor_and_level">
<span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">validate_factor_and_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.validate_factor_and_level" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>factor</strong> (<a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a>) – </p></li>
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.Consistency">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">Consistency</span></span><a class="headerlink" href="#sweetpea.constraints.Consistency" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="sweetpea.base_constraint.html#sweetpea.base_constraint.Constraint" title="sweetpea.base_constraint.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a></p>
<p>This constraint ensures that only one level of each factor is ‘on’ at a
time. So for instance in the experiment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">color</span> <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">])</span>
<span class="n">text</span>  <span class="o">=</span> <span class="n">Factor</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span>  <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">])</span>
<span class="n">design</span> <span class="o">=</span> <span class="n">crossing</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">conFactor</span><span class="p">]</span>
<span class="n">experiment</span>   <span class="o">=</span> <span class="n">fully_cross_block</span><span class="p">(</span><span class="n">design</span><span class="p">,</span> <span class="n">crossing</span><span class="p">,</span> <span class="p">[])</span>
</pre></div>
</div>
<p>The first trial is represented by the boolean vars <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></code>:</p>
<ul class="simple">
<li><p>1 is true iff the trial is color:red</p></li>
<li><p>2 is true iff the trial is color:blue</p></li>
<li><p>3 is true iff the trial is text:red</p></li>
<li><p>4 is true iff the trial is text:blue</p></li>
</ul>
<p>The second trial is represented by the boolean vars <code class="docutils literal notranslate"><span class="pre">[5-8]</span></code>, the third by
<code class="docutils literal notranslate"><span class="pre">[9-12]</span></code>, the fourth by <code class="docutils literal notranslate"><span class="pre">[13-16]</span></code>. So this desugaring applies the
following constraints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">EQ</span> <span class="mi">1</span>
<span class="nb">sum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="n">EQ</span> <span class="mi">1</span>
<span class="nb">sum</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="n">EQ</span> <span class="mi">1</span>
<span class="o">...</span>
<span class="nb">sum</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="n">EQ</span> <span class="mi">1</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Consistency.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Consistency.validate" title="Permalink to this definition"></a></dt>
<dd><p>Constraints can’t be completely validated in isolation. This
function will be called on all constraints with the block during the
block initialization to ensure all constraints are valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Consistency.apply">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Consistency.apply" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.FullyCross">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">FullyCross</span></span><a class="headerlink" href="#sweetpea.constraints.FullyCross" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="sweetpea.base_constraint.html#sweetpea.base_constraint.Constraint" title="sweetpea.base_constraint.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a></p>
<p>We represent the fully crossed constraint by allocating additional
boolean variables to represent each unique state. Only factors in crossing
will contribute to the number of states (there may be factors in the design
that aren’t in the crossing).</p>
<p>Continuing with the example from <a class="reference internal" href="#sweetpea.constraints.Consistency" title="sweetpea.constraints.Consistency"><code class="xref py py-class docutils literal notranslate"><span class="pre">Consistency</span></code></a>, we will represent
the states:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">color</span><span class="p">:</span><span class="n">red</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span><span class="n">red</span><span class="p">)</span>
<span class="p">(</span><span class="n">color</span><span class="p">:</span><span class="n">red</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span><span class="n">blue</span><span class="p">)</span>
<span class="p">(</span><span class="n">color</span><span class="p">:</span><span class="n">blue</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span><span class="n">red</span><span class="p">)</span>
<span class="p">(</span><span class="n">color</span><span class="p">:</span><span class="n">blue</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span><span class="n">blue</span><span class="p">)</span>
</pre></div>
</div>
<p>The steps taken are:</p>
<ol class="arabic">
<li><p>Generate intermediate vars</p>
<blockquote>
<div><p>Using the fresh var counter, allocate <code class="docutils literal notranslate"><span class="pre">numTrials</span> <span class="pre">*</span> <span class="pre">num_states</span></code> new
vars</p>
</div></blockquote>
</li>
<li><p>Entangle them with block vars</p>
<blockquote>
<div><p>Add to the CNF queue: <code class="docutils literal notranslate"><span class="pre">toCNF(Iff(newVar,</span> <span class="pre">And(levels)))</span></code>, e.g., if the
variable <code class="docutils literal notranslate"><span class="pre">1</span></code> indicates <code class="docutils literal notranslate"><span class="pre">color:red</span></code>, the var <code class="docutils literal notranslate"><span class="pre">3</span></code> indicates
<code class="docutils literal notranslate"><span class="pre">text:red</span></code>, and the var <code class="docutils literal notranslate"><span class="pre">25</span></code> represents <code class="docutils literal notranslate"><span class="pre">(color:red,</span> <span class="pre">text:red)</span></code>,
do <code class="docutils literal notranslate"><span class="pre">toCNF(Iff(25,</span> <span class="pre">And([1,</span> <span class="pre">3])))</span></code></p>
</div></blockquote>
</li>
<li><p>1 hot the <em>states</em> e.g., 1 red circle, etc</p>
<blockquote>
<div><p>Same as <a class="reference internal" href="#sweetpea.constraints.Consistency" title="sweetpea.constraints.Consistency"><code class="xref py py-class docutils literal notranslate"><span class="pre">Consistency</span></code></a> above, collect all the state vars that
represent each state &amp; enforce that only one of those states is true,
e.g., <code class="docutils literal notranslate"><span class="pre">sum(25,</span> <span class="pre">29,</span> <span class="pre">33,</span> <span class="pre">37)</span> <span class="pre">EQ</span> <span class="pre">1</span></code> (and 3 more of these for each of the
other states).</p>
</div></blockquote>
</li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.FullyCross.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.FullyCross.validate" title="Permalink to this definition"></a></dt>
<dd><p>Constraints can’t be completely validated in isolation. This
function will be called on all constraints with the block during the
block initialization to ensure all constraints are valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.FullyCross.apply">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.FullyCross.apply" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.FullyCrossBlock" title="sweetpea.blocks.FullyCrossBlock"><em>FullyCrossBlock</em></a>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.MultipleCross">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">MultipleCross</span></span><a class="headerlink" href="#sweetpea.constraints.MultipleCross" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="sweetpea.base_constraint.html#sweetpea.base_constraint.Constraint" title="sweetpea.base_constraint.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.MultipleCross.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.MultipleCross.validate" title="Permalink to this definition"></a></dt>
<dd><p>Constraints can’t be completely validated in isolation. This
function will be called on all constraints with the block during the
block initialization to ensure all constraints are valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.MultipleCross.apply">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.MultipleCross.apply" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.MultipleCrossBlock" title="sweetpea.blocks.MultipleCrossBlock"><em>MultipleCrossBlock</em></a>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.Derivation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">Derivation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">derived_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dependent_idxs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Derivation" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="sweetpea.base_constraint.html#sweetpea.base_constraint.Constraint" title="sweetpea.base_constraint.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a></p>
<p>A derivation such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Derivation</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
</pre></div>
</div>
<p>where the index of the derived level is <code class="docutils literal notranslate"><span class="pre">4</span></code>, and <code class="docutils literal notranslate"><span class="pre">[[0,</span> <span class="pre">2],</span> <span class="pre">[1,</span> <span class="pre">3]]</span></code> is
the list of dependent indices, represents the logical formula:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">4</span> <span class="n">iff</span> <span class="p">(</span><span class="mi">0</span> <span class="ow">and</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">1</span> <span class="ow">and</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>These indicies are used the get the corresponding trial variables.
Continuing from the example in of processDerivations, the first trial is
represented by variables <code class="docutils literal notranslate"><span class="pre">[1-6]</span></code> (notice this feels like an off-by-one:
the indicies start from <code class="docutils literal notranslate"><span class="pre">0</span></code>, but the boolean variables start from <code class="docutils literal notranslate"><span class="pre">1</span></code>).
So we would use the indices to map onto the vars as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="n">iff</span> <span class="p">(</span><span class="mi">1</span> <span class="ow">and</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">2</span> <span class="ow">and</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we convert to CNF directly, i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">toCNF</span><span class="p">(</span><span class="n">Iff</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">Or</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">And</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">))))</span>
</pre></div>
</div>
<p>This is then done for all window-sizes, taking into account strides (which
are specified only in <a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DerivedLevels</span></code></a> specified with
a general <code class="xref py py-class docutils literal notranslate"><span class="pre">Window</span></code> rather than <code class="xref py py-class docutils literal notranslate"><span class="pre">Transition</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">WithinTrial</span></code>). We grab window-sized chunks of the variables that
represent the trials, map the variables using the indices, and then convert
to CNF. These chunks look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">window1</span><span class="p">:</span> <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>
<span class="n">window2</span><span class="p">:</span> <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span>  <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span>
</pre></div>
</div>
<p>So, for the second trial (since the window size in this example is <code class="docutils literal notranslate"><span class="pre">1</span></code>)
it would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">11</span> <span class="n">iff</span> <span class="p">(</span><span class="mi">7</span> <span class="ow">and</span> <span class="mi">9</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="mi">8</span> <span class="ow">and</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>90% sure this is the correct way to generalize to derivations involving 2+
levels &amp; various windowsizes. One test is the experiment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">];</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">];</span>
<span class="n">conFactor</span><span class="p">;</span>
<span class="n">fullycross</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span> <span class="o">+</span> <span class="n">AtMostKInARow</span> <span class="mi">1</span> <span class="n">conLevel</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>derived_idx</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – </p></li>
<li><p><strong>dependent_idxs</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.List" title="(in Python v3.7)"><em>List</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.List" title="(in Python v3.7)"><em>List</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>factor</strong> (<a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedFactor" title="sweetpea.primitives.DerivedFactor"><em>DerivedFactor</em></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Derivation.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Derivation.validate" title="Permalink to this definition"></a></dt>
<dd><p>Constraints can’t be completely validated in isolation. This
function will be called on all constraints with the block during the
block initialization to ensure all constraints are valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Derivation.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Derivation.apply" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Derivation.is_complex">
<span class="sig-name descname"><span class="pre">is_complex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Derivation.is_complex" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sweetpea.constraints.at_most_k_in_a_row">
<span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">at_most_k_in_a_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.at_most_k_in_a_row" title="Permalink to this definition"></a></dt>
<dd><p>This desugars pretty directly into the llrequests. The only thing to do
here is to collect all the boolean vars that match the same level &amp; pair
them up according to k.</p>
<p>Continuing with the example from <a class="reference internal" href="#sweetpea.constraints.Consistency" title="sweetpea.constraints.Consistency"><code class="xref py py-class docutils literal notranslate"><span class="pre">Consistency</span></code></a>, say we want
<code class="docutils literal notranslate"><span class="pre">AtMostKInARow</span> <span class="pre">1</span> <span class="pre">(&quot;color&quot;,</span> <span class="pre">&quot;red&quot;)</span></code>, then we need to grab all the vars
which indicate color-red:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
</pre></div>
</div>
<p>and then wrap them up so that we’re making requests like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>  <span class="n">LT</span> <span class="mi">2</span>
<span class="nb">sum</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>  <span class="n">LT</span> <span class="mi">2</span>
<span class="nb">sum</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span> <span class="n">LT</span> <span class="mi">2</span>
</pre></div>
</div>
<p>If it had been <code class="docutils literal notranslate"><span class="pre">AtMostKInARow</span> <span class="pre">2</span> <span class="pre">(&quot;color&quot;,</span> <span class="pre">&quot;red&quot;)</span></code>, the reqs would have
been:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>  <span class="n">LT</span> <span class="mi">3</span>
<span class="nb">sum</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span> <span class="n">LT</span> <span class="mi">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.AtMostKInARow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">AtMostKInARow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.AtMostKInARow" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_KInARow</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Tuple" title="(in Python v3.7)"><em>Tuple</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em><em>]</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.AtMostKInARow.apply_to_backend_request">
<span class="sig-name descname"><span class="pre">apply_to_backend_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.AtMostKInARow.apply_to_backend_request" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Tuple" title="(in Python v3.7)"><em>Tuple</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sweetpea.constraints.at_least_k_in_a_row">
<span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">at_least_k_in_a_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.at_least_k_in_a_row" title="Permalink to this definition"></a></dt>
<dd><p>This is more complicated that AtMostKInARow. We collect all the boolean
vars that match the same level &amp; pair them up according to k.</p>
<p>We want <code class="docutils literal notranslate"><span class="pre">AtLeastKInARow</span> <span class="pre">2</span> <span class="pre">(&quot;color&quot;,</span> <span class="pre">&quot;red&quot;)</span></code>, then we need to grab all the
vars which indicate color-red:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
</pre></div>
</div>
<p>and then wrap them up in CNF as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>If(1) Then (7)          --------This is a corner case
If(And(!1, 7)) Then (13)
If(And(!7, 13)) Then (19)
If(19) Then (13)   --------This is a corner case
</pre></div>
</div>
<p>If it had been <code class="docutils literal notranslate"><span class="pre">AtLeastKInARow</span> <span class="pre">3</span> <span class="pre">(&quot;color&quot;,</span> <span class="pre">&quot;red&quot;)</span></code>, the CNF would have
been:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>If(1) Then (7, 13)          --------This is a corner case
If(And(!1, 7)) Then (13, 19)
If(19) Then (7, 13)   --------This is a corner case
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.AtLeastKInARow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">AtLeastKInARow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.AtLeastKInARow" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_KInARow</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.AtLeastKInARow.apply_to_backend_request">
<span class="sig-name descname"><span class="pre">apply_to_backend_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.AtLeastKInARow.apply_to_backend_request" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Tuple" title="(in Python v3.7)"><em>Tuple</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sweetpea.constraints.exactly_k">
<span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">exactly_k</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.exactly_k" title="Permalink to this definition"></a></dt>
<dd><p>Requires that if the given level exists at all, it must exist in a trial
exactly <code class="docutils literal notranslate"><span class="pre">k</span></code> times.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.ExactlyK">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">ExactlyK</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.ExactlyK" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_KInARow</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Tuple" title="(in Python v3.7)"><em>Tuple</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em><em>]</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.ExactlyK.apply_to_backend_request">
<span class="sig-name descname"><span class="pre">apply_to_backend_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.ExactlyK.apply_to_backend_request" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Tuple" title="(in Python v3.7)"><em>Tuple</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sweetpea.constraints.exactly_k_in_a_row">
<span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">exactly_k_in_a_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.exactly_k_in_a_row" title="Permalink to this definition"></a></dt>
<dd><p>Requires that if the given level exists at all, it must exist in a
sequence of exactly K.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.ExactlyKInARow">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">ExactlyKInARow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.ExactlyKInARow" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_KInARow</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Tuple" title="(in Python v3.7)"><em>Tuple</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em><em>]</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.ExactlyKInARow.apply_to_backend_request">
<span class="sig-name descname"><span class="pre">apply_to_backend_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.ExactlyKInARow.apply_to_backend_request" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Tuple" title="(in Python v3.7)"><em>Tuple</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Union" title="(in Python v3.7)"><em>Union</em></a><em>[</em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a><em>, </em><a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sweetpea.constraints.exclude">
<span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">exclude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.exclude" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.Exclude">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">Exclude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Exclude" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="sweetpea.base_constraint.html#sweetpea.base_constraint.Constraint" title="sweetpea.base_constraint.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Exclude.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Exclude.validate" title="Permalink to this definition"></a></dt>
<dd><p>Constraints can’t be completely validated in isolation. This
function will be called on all constraints with the block during the
block initialization to ensure all constraints are valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Exclude.extract_simplelevel">
<span class="sig-name descname"><span class="pre">extract_simplelevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Exclude.extract_simplelevel" title="Permalink to this definition"></a></dt>
<dd><p>Recursively deciphers the excluded level to a list of combinations
basic levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>level</strong> (<a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.DerivedLevel" title="sweetpea.primitives.DerivedLevel"><em>DerivedLevel</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.List" title="(in Python v3.7)"><em>List</em></a>[<a class="reference external" href="https://docs.python.org/3.7/library/typing.html#typing.Dict" title="(in Python v3.7)"><em>Dict</em></a>[<a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.Factor" title="sweetpea.primitives.Factor"><em>Factor</em></a>, <a class="reference internal" href="sweetpea.primitives.html#sweetpea.primitives.SimpleLevel" title="sweetpea.primitives.SimpleLevel"><em>SimpleLevel</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.Exclude.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.Exclude.apply" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sweetpea.constraints.minimum_trials">
<span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">minimum_trials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.minimum_trials" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sweetpea.constraints.MinimumTrials">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sweetpea.constraints.</span></span><span class="sig-name descname"><span class="pre">MinimumTrials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trials</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.MinimumTrials" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="sweetpea.base_constraint.html#sweetpea.base_constraint.Constraint" title="sweetpea.base_constraint.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constraint</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.MinimumTrials.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.MinimumTrials.validate" title="Permalink to this definition"></a></dt>
<dd><p>Constraints can’t be completely validated in isolation. This
function will be called on all constraints with the block during the
block initialization to ensure all constraints are valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sweetpea.constraints.MinimumTrials.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sweetpea.constraints.MinimumTrials.apply" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<a class="reference internal" href="sweetpea.blocks.html#sweetpea.blocks.Block" title="sweetpea.blocks.Block"><em>Block</em></a>) – </p></li>
<li><p><strong>backend_request</strong> (<a class="reference internal" href="sweetpea.backend.html#sweetpea.backend.BackendRequest" title="sweetpea.backend.BackendRequest"><em>BackendRequest</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sweetpea.combinatorics.html" class="btn btn-neutral float-left" title="sweetpea.combinatorics module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sweetpea.derivation_processor.html" class="btn btn-neutral float-right" title="sweetpea.derivation_processor module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, SweetPea Research Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>